# Проект Nimax

Cервис **Micromarket**, для получения информации о категориях, товарах, и в какие категории входят товары.


---

### Использованные технологии:

- ***Django** 4.2.5*
- ***Django REST Framework** 3.14*
- *WSGI сервер **gunicorn** 21.2*
- *База Данных  **PostgreSQL***
- *Контейнеризация **Docker***

*Приложение написано на **Python** 3.11*

---

### Как начать работу с проектом:

Клонировать репозиторий:
```bash
git clone git@github.com:VtlBz/Nimax_tst.git
```

Перейти в папку ***infra/***, находящуюся внутри папки с проектом.

В указанной папке в файле ***.env*** указать переменные окружения, соответствующие проекту.
Пример заполнения:

```bash
SECRET_KEY=<указать-тут-ключ-проекта>
ALLOWED_HOSTS=<перечислить разрешенные хосты через пробел>

DEBUG_STATE=False # статус режима DEBUG, по умолчанию False

DB_ENGINE=django.db.backends.postgresql # Тип используемой БД. В проекте используется PostgreSQL
DB_NAME=postgres # Имя базы
POSTGRES_USER=postgres # Имя пользователя БД
POSTGRES_PASSWORD=postgres # Пароль пользователя БД
DB_HOST=localhost # название сервиса (контейнера), по умолчанию - localhost
DB_PORT=5432 # Порт для подключения к сервису, стандартный по умолчанию

COMPOSE_PROJECT_NAME=nimax # имя проекта проекта в Docker Compose
```

Запустить сборку контейнеров командой:

```bash
sudo docker compose up -d
```

- *В зависимости от настроек системы возможно тут и далее потребуется использовать команду **docker compose** c дефисом вместо пробела: **docker-compose***

При первом запуске создать и применить миграции:

```bash
sudo docker exec -it nimax-srv python manage.py makemigrations
sudo docker exec -it nimax-srv python manage.py migrate
```

При необходимости наполнить БД тестовыми данными:

```bash
sudo docker exec -it nimax-srv python manage.py importcsv
```

При необходимости создать суперпользователя:

```bash
sudo docker exec -it nimax-srv python manage.py createsuperuser
```

В браузере перейти на страницу [localhost/api/v1](localhost/api/v1)  

Базовая документация API находится по адресу [localhost/api/v1/swagger/](localhost/api/v1/swagger/)  

В сервисе доступны следующие эндпоинты:
*В документации API более подробно указаны требуемые для объектов поля, их обязательность и примеры данных запросов и ответов*

- 
    ```
    localhost/api/v1/categories/
    ```

    Методы: 
    ``GET`` - позволяет получить список существующих в БД категорий;
    ``POST`` - позволяет создать новую категорию;

- 
    ```
    localhost/api/v1/categories/{id}
    ```

    Методы: 
    ``GET`` - позволяет получить конкретную категорию по её ``id``;
    ``POST`` - позволяет создать новую категорию;
    ``DELETE`` - позволяет удалить категорию, если она не содержит связанных продуктов;

- 
    ```
    localhost/api/v1/goods/
    ```

    Методы: 
    ``GET`` - позволяет получить список существующих в БД товаров;
    *\* Поддерживает возможность фильтрации. Поля указанны в документации API.*.
    ``POST`` - позволяет создать новвый товар; *
    *\* По требованиям ТЗ товар должен ходить минимум в 2 категории и максимум в 10 категорий*.

- 
    ```
    localhost/api/v1/goods/{id}
    ```

    Методы: 
    ``GET`` - позволяет получить конкретный товар по его ``id``;
    ``POST`` - позволяет создать новый товар;
    ``DELETE`` - позволяет удалить товар;

При необходимости указать вместо ***localhost*** нужное имя хоста.

---

\* *ТЗ и тестовые данные лежат в папке ./data*